[SERVER]
11.11.11.11

[DOWNLOAD]
kgcc/9.3.1 https://mirrors.huaweicloud.com/kunpeng/archive/compiler/kunpeng_gcc/gcc-9.3.1-2021.03-aarch64-linux.tar.gz
openmpi/4.1.2 https://download.open-mpi.org/release/open-mpi/v4.1/openmpi-4.1.2.tar.gz

[DEPENDENCY]
./jarvis -install kgcc/9.3.1 com
module purge
module use ./software/modulefiles
module load kgcc9/9.3.1
export CC=`which gcc`
export CXX=`which g++`
export FC=`which gfortran`
./jarvis -install openmpi/4.1.2 gcc
module load openmpi4/4.1.2
#test if mpi is normal
./jarvis -bench mpi

[ENV]
module purge
module use ./software/modulefiles
module load kgcc9
module load openmpi4/4.1.2

[APP]
app_name = QE
build_dir = /hpcrunner/q-e-qe-6.4.1/
binary_dir = /hpcrunner/q-e-qe-6.4.1/bin/
case_dir = /hpcrunner/workloads/QE/qe-test

[BUILD]
./configure F90=gfortran F77=gfortran MPIF90=mpifort MPIF77=mpifort CC=mpicc FCFLAGS="-O3" CFLAGS="-O3" --with-scalapack=no --enable-openmp
make -j 96 pwall
make install

[CLEAN]
make clean

[RUN]
#container-run = mpirun --allow-run-as-root -x OMP_NUM_THREADS=1 -np 96 singularity exec xx.sif /hpcrunner/q-e-qe-6.4.1/bin pw.x -input /hpcrunner/workloads/QE/qe-test/test_3.in
run = mpirun --allow-run-as-root -x OMP_NUM_THREADS=1 -np 96
binary = pw.x -input test_3.in
nodes = 1